{# This is a collection of macros dealing with output content #}

{# this macro generates a card for an output item given an
 # output item in JSON.
 #}
{% macro outputcard( item ) %}

<li id="output-{{ item.name|lower|replace(' ', '-', 'g') }}" class="results-tile col-xs-offset-1 col-xs-10 mb4" data-publish-date="{{ item.publish_date }}" data-sort-value="{% for value in merge( item.research_topics, item.output_type ) %}{{ value.name|lower|replace(' ', '-', 'g') }} {% endfor %}">
        <div class="row">
            <div class="col-sm-3 hidden-xs">
                <img class="results-tile-cover-image" src="{{ item.cover_image|imageSize(500) }}" />
            </div>
            <div class="col-sm-9 col-xs-12">
                <h6 class="results-tile-metadata bold">

                    {{ item.publication_date|date('F Y')}}

                    {% if item.authors|size > 0 or item.output_type|size > 0 %}
                        <span class="brand-stroke">/</span>
                    {% endif %}

                    {% if item.output_type|size > 0 %}
                        {{ item.output_type.name }}
                        <span class="brand-stroke">/</span>
                    {% endif %}

                    {% for team_member in item.authors %}
                        {{ team_member.name }}{% if !loop.last %}, {% endif %}
                    {% endfor %}
                </h6>
                <a href="{{ url( item ) }}"><h4 class="results-tile-title bold">{{ item.name }}</h4></a>
                <h6 class="results-tile-summary mb1">{{ item.summary }}</h6>
            </div>
        </div>
</li>

{% endmacro %}

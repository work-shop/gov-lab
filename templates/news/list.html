
{% extends "templates/partials/base.html" %}

{# This sets our page <title>. It will append news to the site title defined in base.html #}
{% block title %}{% parent %} - News{% endblock %}

{% block content %}


<section id="news-introduction" class="bg-light block">
  <div class="block-background" style="background: url({{ cms.about.news_image|imageSize(2500,500)}}); background-size:cover; background-position:center center;"> </div>

  <div class="container half-strict block">

    <div class="row vertical-center">
      <div class="col-sm-offset-6 col-sm-5 white centered">
      <h2 class="bold">Where are we researching now?</h2>
      <h2>Follow our latest news, project updates, and research publications, <br class="hidden-xs"> or subscribe to our newsletter.</h2>
      </div>
    </div>

  </div>

</section>

<section id="news" class="bg-white padded" aside-enter>
  <div class="container-fluid">
  <div class="row">


    <div id="sidebar" class="col-sm-2 bg-white hidden-xs">
      <aside class="mt2">
          <ul>
            
            <li class="sidebar-item sidebar-region-sort mb4">
              <ul>
                <li class="h5 uppercase bold sidebar-heading">Sort By</li>
                <hr class="hr-brand" />

                {% for category in cms.newscategories %}

                  <li class="sort-key sidebar-item h6 uppercase" data-sort-key="{{ category.name|lower }}">{{ category.name }}</li>

                {% endfor %}
              </ul>
            </li>

            <li class="sidebar-item sidebar-region-sort">
              <ul>
                <li data-sort-key=" " class="sort-key h6 uppercase active sidebar-item">All Updates</li>
              </ul>
            </li>

          </ul>

        </aside>
    </div>


    <div class="col-sm-9 bg-white">
      <ul id="news-list">

      {% for news in cms.news|sort('publish_date') %}

      <li class="row mb4" data-sort-value="{% if ( news.category ) %}{{ news.category.name|lower }}{% endif%} ">

        {% if ( news.category ) %}
        <div class="col-xs-offset-1 col-sm-offset-10 col-xs-2">
          <h6 class="bold uppercase mb0">{{ news.category.name }}</h6>
        </div>
        {% endif %}

          <div class="col-xs-offset-1 col-xs-10 col-sm-4 mt1">
            {% if ( news.cover_image ) %}
              <img class="news-tile-image" src="{{ news.cover_image|imageSize(300) }}" alt="">
            {% else %}
              <img src="{{ news.cover_image|imageSize(300) }}" alt="">
            {% endif %}
          </div>

          <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-5 mt1 news-rule pt2">
            <a href="{{ url(news) }}"><h3 class="mb1 mt0 bold">{{ news.name }}</h3></a>
            <p>{{ news.summary }}</p>
          </div>
 
        <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-2 mt1 news-rule-xs pt1">
          <h6 class="bold uppercase">{{ news.publish_date|date('m / d / y') }}</h6> 
          {% if ( news.author ) %}
            <h6 class="bold uppercase">{{ news.author.name }}</h6> 
          {% endif %}
        </div>
      </li>

      {% endfor %}
      </ul>
    </div>
  </div>
  </div>
</section>

<section id="back" class="bg-white padded" aside-exit>
  <div class="container">
  <div class="row">
    <div class="col-sm-offset-3 col-sm-6 centered">
      <a class="sync" href="/"><h5 class="back-to-home">
        Back To Home
      </h5></a>
    </div>
  </div>
  </div>
</section>

{% endblock %}
